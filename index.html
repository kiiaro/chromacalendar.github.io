<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Hello World com Calendário Interativo</title>
<style>
  :root {
    --primary-color: #4a90e2;
    --primary-color-dark: #357ABD;
    --background: #f4f7fc;
    --text-color: #333;
    --accent-color: #50e3c2;
    --event-bg: #4a90e2;
    --event-bg-dark: #357ABD;
    --font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  }
  * {
    box-sizing: border-box;
  }
  body {
    margin: 0; padding: 20px;
    font-family: var(--font-family);
    background-color: var(--background);
    color: var(--text-color);
    user-select: none;
    -webkit-font-smoothing: antialiased;
  }
  h1, p {
    text-align: center;
  }
  h1 {
    font-weight: 700;
    color: var(--primary-color-dark);
  }
  .calendar {
    max-width: 800px;
    margin: 20px auto 0 auto;
    background: white;
    border-radius: 12px;
    box-shadow: 0 4px 20px rgb(0 0 0 / 0.1);
    padding: 16px;
  }
  .calendar-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 12px;
  }
  .calendar-header button {
    background: var(--primary-color);
    border: none;
    color: white;
    padding: 10px 14px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 600;
    font-size: 14px;
    transition: background-color 0.3s ease;
  }
  .calendar-header button:hover {
    background: var(--primary-color-dark);
  }
  .month-year {
    font-size: 1.4rem;
    font-weight: 700;
    color: var(--primary-color);
    user-select: none;
  }
  .days-of-week {
    display: grid;
    grid-template-columns: repeat(7,1fr);
    text-align: center;
    font-weight: 600;
    color: var(--primary-color-dark);
    margin-bottom: 12px;
    user-select: none;
  }
  .days-of-week div {
    padding: 8px 0;
  }
  .days {
    display: grid;
    grid-template-columns: repeat(7,1fr);
    grid-auto-rows: 90px;
    gap: 8px;
  }
  .day {
    background: #e8ecf8;
    border-radius: 12px;
    position: relative;
    cursor: pointer;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    padding: 8px 8px 32px 8px;
    display: flex;
    flex-direction: column;
  }
  .day:hover {
    transform: scale(1.3);
    z-index: 10;
    box-shadow: 0 6px 20px rgba(74, 144, 226, 0.4);
    background: #dde6f9;
  }
  .day.outside-month {
    opacity: 0.3;
    cursor: default;
    transform: none !important;
  }
  .day-number {
    font-weight: 700;
    font-size: 1.1rem;
    color: var(--primary-color-dark);
    user-select: none;
  }
  .events {
    margin-top: 4px;
    overflow-y: auto;
    flex-grow: 1;
  }
  .event {
    background-color: var(--event-bg);
    color: white;
    border-radius: 8px;
    font-size: 0.75rem;
    margin-bottom: 4px;
    padding: 2px 6px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    box-shadow: 0 2px 4px var(--event-bg-dark);
  }
  /* Scrollbar for events */
  .events::-webkit-scrollbar {
    width: 6px;
  }
  .events::-webkit-scrollbar-thumb {
    background-color: var(--primary-color);
    border-radius: 3px;
  }
  /* Modal styles */
  .modal-bg {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(0,0,0,0.5);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 50;
  }
  .modal-bg.active {
    display: flex;
  }
  .modal {
    background: white;
    border-radius: 12px;
    padding: 24px;
    width: 320px;
    max-width: 90vw;
    box-shadow: 0 8px 40px rgba(0,0,0,0.15);
  }
  .modal h2 {
    margin-top: 0;
    margin-bottom: 14px;
    color: var(--primary-color);
  }
  label {
    display: block;
    margin-bottom: 6px;
    font-weight: 600;
    color: var(--primary-color-dark);
  }
  input[type="text"], input[type="time"] {
    width: 100%;
    padding: 8px 10px;
    margin-bottom: 16px;
    border-radius: 8px;
    border: 1px solid #bbb;
    font-size: 1rem;
    font-family: var(--font-family);
  }
  input[type="time"] {
    letter-spacing: 0.1em;
  }
  .modal-buttons {
    display: flex;
    justify-content: flex-end;
    gap: 12px;
  }
  .btn {
    cursor: pointer;
    border: none;
    border-radius: 8px;
    font-weight: 600;
    padding: 10px 16px;
    color: white;
    font-size: 1rem;
    transition: background-color 0.3s ease;
  }
  .btn.cancel {
    background: #ddd;
    color: #444;
  }
  .btn.cancel:hover {
    background: #ccc;
  }
  .btn.save {
    background: var(--accent-color);
  }
  .btn.save:hover {
    background: #40b69a;
  }
  /* Responsive */
  @media (max-width: 600px) {
    .days {
      grid-auto-rows: 70px;
    }
    .day:hover {
      transform: scale(1.2);
    }
  }
</style>
</head>
<body>
  <h1>Hello World</h1>
  <p>I'm hosted with GitHub Pages.</p>

  <div class="calendar" aria-label="Calendário Interativo">
    <div class="calendar-header">
      <button id="prev-month" aria-label="Mês Anterior">&#9664;</button>
      <div class="month-year" aria-live="polite" aria-atomic="true"></div>
      <button id="next-month" aria-label="Próximo Mês">&#9654;</button>
    </div>
    <div class="days-of-week" aria-hidden="true">
      <div>Dom</div>
      <div>Seg</div>
      <div>Ter</div>
      <div>Qua</div>
      <div>Qui</div>
      <div>Sex</div>
      <div>Sáb</div>
    </div>
    <div class="days" role="grid" aria-label="Dias do Mês">
      <!-- Days will be generated here -->
    </div>
  </div>

  <!-- Modal to add event -->
  <div class="modal-bg" id="modal" role="dialog" aria-modal="true" aria-labelledby="modal-title" aria-describedby="modal-desc">
    <div class="modal">
      <h2 id="modal-title">Adicionar Evento</h2>
      <form id="event-form">
        <label for="event-title">Título do Evento</label>
        <input type="text" id="event-title" name="event-title" placeholder="Ex: Reunião" required maxlength="50" />

        <label for="start-time">Hora Início</label>
        <input type="time" id="start-time" name="start-time" required pattern="^([01]\\d|2[0-3]):([0-5]\\d)$"/>

        <label for="end-time">Hora Fim</label>
        <input type="time" id="end-time" name="end-time" required pattern="^([01]\\d|2[0-3]):([0-5]\\d)$"/>

        <div class="modal-buttons">
          <button type="button" class="btn cancel" id="cancel-btn">Cancelar</button>
          <button type="submit" class="btn save">Salvar</button>
        </div>
      </form>
    </div>
  </div>

<script>
  (function() {
    const storageKey = 'calendar-events';

    const daysContainer = document.querySelector('.days');
    const monthYearLabel = document.querySelector('.month-year');
    const prevBtn = document.getElementById('prev-month');
    const nextBtn = document.getElementById('next-month');
    const modal = document.getElementById('modal');
    const eventForm = document.getElementById('event-form');
    const cancelBtn = document.getElementById('cancel-btn');
    const eventTitleInput = document.getElementById('event-title');
    const startTimeInput = document.getElementById('start-time');
    const endTimeInput = document.getElementById('end-time');

    let currentDate = new Date();
    let selectedDay = null;

    function getDateKey(date) {
      const y = date.getFullYear();
      const m = (date.getMonth() + 1).toString().padStart(2, '0');
      const d = date.getDate().toString().padStart(2, '0');
      return y + '-' + m + '-' + d;
    }

    function loadEvents() {
      const data = localStorage.getItem(storageKey);
      return data ? JSON.parse(data) : {};
    }

    function saveEvents(events) {
      localStorage.setItem(storageKey, JSON.stringify(events));
    }

    let events = loadEvents();

    function renderCalendar(date) {
      daysContainer.innerHTML = '';
      const year = date.getFullYear();
      const month = date.getMonth();

      const monthNames = [
        'Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho',
        'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'
      ];
      monthYearLabel.textContent = monthNames[month] + ' ' + year;

      const firstDay = new Date(year, month, 1);
      const firstWeekday = firstDay.getDay();
      const daysInMonth = new Date(year, month + 1, 0).getDate();
      const prevMonthLastDay = new Date(year, month, 0).getDate();

      const totalCells = 42;
      let prevMonthStart = prevMonthLastDay - firstWeekday + 1;

      for (let i = 0; i < totalCells; i++) {
        let dayDiv = document.createElement('div');
        dayDiv.classList.add('day');
        dayDiv.setAttribute('role', 'gridcell');

        let dateNum = 0;
        let dayDate = null;
        if (i < firstWeekday) {
          dateNum = prevMonthStart + i;
          dayDiv.classList.add('outside-month');
          let prevMonthDate = new Date(year, month - 1, dateNum);
          dayDate = prevMonthDate;
          dayDiv.setAttribute('aria-label', dateNum + ' ' + monthNames[(month - 1) >= 0 ? month - 1 : 11]);
        } else if (i >= firstWeekday && i < firstWeekday + daysInMonth) {
          dateNum = i - firstWeekday + 1;
          dayDiv.classList.remove('outside-month');
          dayDate = new Date(year, month, dateNum);
          dayDiv.setAttribute('aria-label', dateNum + ' ' + monthNames[month] + ' ' + year);
        } else {
          dateNum = i - (firstWeekday + daysInMonth) + 1;
          dayDiv.classList.add('outside-month');
          let nextMonthDate = new Date(year, month + 1, dateNum);
          dayDate = nextMonthDate;
          dayDiv.setAttribute('aria-label', dateNum + ' ' + monthNames[(month + 1) <= 11 ? month + 1 : 0]);
        }

        const dayNumberSpan = document.createElement('div');
        dayNumberSpan.classList.add('day-number');
        dayNumberSpan.textContent = dateNum;
        dayDiv.appendChild(dayNumberSpan);

        const eventContainer = document.createElement('div');
        eventContainer.classList.add('events');
        dayDiv.appendChild(eventContainer);

        const key = getDateKey(dayDate);
        if (events[key]) {
          events[key].forEach(ev => {
            const eDiv = document.createElement('div');
            eDiv.classList.add('event');
            eDiv.textContent = ev.title + ' ' + ev.start + ' - ' + ev.end;
            eventContainer.appendChild(eDiv);
          });
        }

        if (!dayDiv.classList.contains('outside-month')) {
          dayDiv.style.cursor = 'pointer';
          dayDiv.tabIndex = 0;
          dayDiv.addEventListener('click', () => openModal(dayDate));
          dayDiv.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' || e.key === ' ') {
              e.preventDefault();
              openModal(dayDate);
            }
          });
        } else {
          dayDiv.style.cursor = 'default';
        }

        daysContainer.appendChild(dayDiv);
      }
    }

    function openModal(date) {
      selectedDay = date;
      eventForm.reset();
      modal.classList.add('active');
      eventTitleInput.focus();
    }

    function closeModal() {
      modal.classList.remove('active');
      selectedDay = null;
    }

    eventForm.addEventListener('submit', e => {
      e.preventDefault();
      const title = eventTitleInput.value.trim();
      const start = startTimeInput.value;
      const end = endTimeInput.value;

      if (!title || !start || !end) {
        alert('Por favor, preencha todos os campos.');
        return;
      }
      if (start >= end) {
        alert('Hora de início deve ser antes da hora de fim.');
        return;
      }

      const key = getDateKey(selectedDay);
      if (!events[key]) events[key] = [];
      events[key].push({ title, start, end });
      saveEvents(events);
      renderCalendar(currentDate);
      closeModal();
    });

    cancelBtn.addEventListener('click', e => {
      e.preventDefault();
      closeModal();
    });

    prevBtn.addEventListener('click', () => {
      currentDate = new Date(currentDate.getFullYear(), currentDate.getMonth() - 1, 1);
      renderCalendar(currentDate);
    });

    nextBtn.addEventListener('click', () => {
      currentDate = new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 1);
      renderCalendar(currentDate);
    });

    renderCalendar(currentDate);
  })();
</script>

</body>
</html>

